<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
    <title>My Pension Guide</title>
    <link rel="stylesheet" href="styles.css" />
    <link href="/assets/img/favicon.ico" rel="icon" />
    <link href="/assets/img/apple-touch-icon.png" rel="apple-touch-icon" />
  </head>
  <body>
    <section class="navbar">
      <div class="nav"> 
        <p>My Pension Guide</p>
        <a href="mailto:charlotte.miller@mypensionguide.org" class="contact-link"
          >Contact</a
        >
        <div class="burger-menu" onclick="toggleMenu()">
          <div></div>
          <div></div>
          <div></div>
        </div>
        <div class="mobile-menu">
          <a href="mailto:example@example.com">Contact</a>
        </div>
      </div>
    </section>
    <section id="success-message" style="display: none" class="thanks">
      <div class="over-div">
        <div class="heading">
          <p>
            <i class="fa fa-calendar-check-o" aria-hidden="true"></i>
            Appointment Created Successfully:
          </p>
        </div>
        <div class="heading-mid">
          <p>
            A representative will contact you on the date and time you
            specified.
          </p>
          <p>Check your inbox or spam folder for a confirmation email.</p>
        </div>
      </div>
    </section>
    <section class="banner" id="banner">
      <p class="text-main">Create Your Appointment</p>
      <div class="main">
        <div class="right">
          <p>
            Book your one-on-one complimentary consultation regarding your
            pension and retirement benefit questions.
          </p>
          <p>
            During your meeting, you will receive advice on the best ways to
            utilize your <span>specific retirement</span> options. You will also
            be provided with information that will tell you what your expected
            income will be from your retirement when you retire and how much
            longer you will have to work.
          </p>
          <p>
            Please be sure to indicate which type of appointment you prefer
            (phone call, or teleconference) in the notes section while
            scheduling. Please also include your direct cell phone number.
          </p>
          <p>
            All licensed representatives are not employed or affiliated with the
            school system(s), state or federal pension program(s) or
            organization(s).
          </p>
        </div>
        <div class="form-container">
          <div class="form-text">
            <p class="p1">
              <i class="fa fa-envelope" aria-hidden="true"></i> Contact Us:
            </p>
            <p class="p2">Complete the form below to book your appointment.</p>
          </div>
          <form id="appointment-form">
            <div class="input-group">
              <label for="full-name"
                ><i id="icon" class="fa fa-user" aria-hidden="true"></i> Full
                Name*</label
              >
              <input type="text" id="full-name" required />
            </div>
            <div class="input-group">
              <label for="work-email"
                ><i id="icon" class="fa fa-envelope" aria-hidden="true"></i>
                Work Email*</label
              >
              <input type="email" id="work-email" required />
            </div>
            <div class="input-group">
              <label for="personal-email"
                ><i id="icon" class="fa fa-envelope" aria-hidden="true"></i>
                Personal Email</label
              >
              <input type="email" id="personal-email" />
            </div>
            <div class="input-group">
              <label for="mobile-number"
                ><i id="icon" class="fa fa-phone" aria-hidden="true"></i> Mobile
                Number*</label
              >
              <input
                type="tel"
                id="mobile-number"
                required
                oninput="formatPhoneNumber(this)"
                placeholder="(xxx) xxx-xxxx"
              />
            </div>
            <div class="input-group">
              <label for="employer-district"
                ><i id="icon" class="fa fa-building" aria-hidden="true"></i>
                Employer/District*</label
              >
              <input type="text" id="employer-district" required />
            </div>
            <div class="input-group">
              <label for="department-school"
                ><i id="icon" class="fa fa-sitemap" aria-hidden="true"></i>
                Department/School*</label
              >
              <input type="text" id="department-school" required />
            </div>
            <div class="input-group">
              <label for="job-title"
                ><i id="icon" class="fa fa-briefcase" aria-hidden="true"></i>
                Job Title*</label
              >
              <input type="text" id="job-title" required />
            </div>
            <div class="input-group">
              <label for="state"
                ><i id="icon" class="fa fa-map-marker" aria-hidden="true"></i>
                State</label
              >
              <select id="state" required>
                <option value="">Select a state</option>
                <option value="alabama">Alabama</option>
                <option value="alaska">Alaska</option>
                <option value="arizona">Arizona</option>
                <option value="arkansas">Arkansas</option>
                <option value="california">California</option>
                <option value="colorado">Colorado</option>
                <option value="connecticut">Connecticut</option>
                <option value="delaware">Delaware</option>
                <option value="florida">Florida</option>
                <option value="georgia">Georgia</option>
                <option value="hawaii">Hawaii</option>
                <option value="idaho">Idaho</option>
                <option value="illinois">Illinois</option>
                <option value="indiana">Indiana</option>
                <option value="iowa">Iowa</option>
                <option value="kansas">Kansas</option>
                <option value="kentucky">Kentucky</option>
                <option value="louisiana">Louisiana</option>
                <option value="maine">Maine</option>
                <option value="maryland">Maryland</option>
                <option value="massachusetts">Massachusetts</option>
                <option value="michigan">Michigan</option>
                <option value="minnesota">Minnesota</option>
                <option value="mississippi">Mississippi</option>
                <option value="missouri">Missouri</option>
                <option value="montana">Montana</option>
                <option value="nebraska">Nebraska</option>
                <option value="nevada">Nevada</option>
                <option value="new-hampshire">New Hampshire</option>
                <option value="new-jersey">New Jersey</option>
                <option value="new-mexico">New Mexico</option>
                <option value="new-york">New York</option>
                <option value="north-carolina">North Carolina</option>
                <option value="north-dakota">North Dakota</option>
                <option value="ohio">Ohio</option>
                <option value="oklahoma">Oklahoma</option>
                <option value="oregon">Oregon</option>
                <option value="pennsylvania">Pennsylvania</option>
                <option value="rhode-island">Rhode Island</option>
                <option value="south-carolina">South Carolina</option>
                <option value="south-dakota">South Dakota</option>
                <option value="tennessee">Tennessee</option>
                <option value="texas">Texas</option>
                <option value="utah">Utah</option>
                <option value="vermont">Vermont</option>
                <option value="virginia">Virginia</option>
                <option value="washington">Washington</option>
                <option value="west-virginia">West Virginia</option>
                <option value="wisconsin">Wisconsin</option>
                <option value="wyoming">Wyoming</option>
              </select>
            </div>
            <div class="input-group-mid">
              <p>
                Please select an appointment time from the next available
                options below.
              </p>
            </div>
            <div class="duo-input">
              <div class="input-group">
                <label for="meeting-date"
                  ><i id="icon" class="fa fa-calendar" aria-hidden="true"></i>
                  Meeting Date</label
                >
                <select id="meeting-date" required>
                  <option value="">Select a date</option>
                </select>
              </div>
              <div class="input-group">
                <label for="meeting-time"
                  ><i id="icon" class="fa fa-clock-o" aria-hidden="true"></i>
                  Meeting Time</label
                >
                <select id="meeting-time" required>
                  <option value="">Select a time</option>
                  <option value="08:00">8:00 AM</option>
                  <option value="08:30">8:30 AM</option>
                  <option value="09:00">9:00 AM</option>
                  <option value="09:30">9:30 AM</option>
                  <option value="10:00">10:00 AM</option>
                  <option value="10:30">10:30 AM</option>
                  <option value="11:00">11:00 AM</option>
                  <option value="11:30">11:30 AM</option>
                  <option value="12:00">12:00 PM</option>
                  <option value="12:30">12:30 PM</option>
                  <option value="13:00">1:00 PM</option>
                  <option value="13:30">1:30 PM</option>
                  <option value="14:00">2:00 PM</option>
                  <option value="14:30">2:30 PM</option>
                  <option value="15:00">3:00 PM</option>
                  <option value="15:30">3:30 PM</option>
                  <option value="16:00">4:00 PM</option>
                  <option value="16:30">4:30 PM</option>
                  <option value="17:00">5:00 PM</option>
                  <option value="17:30">5:30 PM</option>
                  <option value="18:00">6:00 PM</option>
                </select>
              </div>
            </div>
            <div class="input-group">
              <label for="preferred-time"
                ><i id="icon" class="fa fa-clock-o" aria-hidden="true"></i>
                Timezone</label
              >
              <select id="preferred-time" required>
                <option value="">Select a timezone</option>
                <option value="Eastern">Eastern</option>
                <option value="Central">Central</option>
                <option value="Mountain">Mountain</option>
                <option value="Mountain - Phoenix">Mountain - Phoenix</option>
                <option value="Pacific">Pacific</option>
                <option value="Alaskan">Alaskan</option>
                <option value="Hawaiian">Hawaiian</option>
              </select>
            </div>
            <div class="input-group">
              <label for="notes"
                ><i id="icon" class="fa fa-pencil" aria-hidden="true"></i>
                Message - (optional)</label
              >
              <textarea id="notes"></textarea>
            </div>
            <div class="input-group">
              <input type="hidden" id="sender-email" name="senderEmail" />
            </div>
            <div class="input-group">
              <button type="submit" onclick="submitForm(event)" class="btn">
                Submit
              </button>
            </div>
            <div
              class="g-recaptcha"
              data-sitekey="6LeRyxorAAAAAGOsiG8DXRlrAIEl4MX5B2fd8MGr"
            ></div>
          </form>
        </div>
      </div>
    </section>
    <div class="footer">
      <div><p>©2024 Copyright My Pension Guide All Rights Reserved</p></div>
      <div class="footer-btn">
        <a target="_blank" href="/privacy.html">Privacy Policy</a>
        <a target="_blank" href="/terms.html">Terms</a>
      </div>
    </div>
    <script
      src="https://kit.fontawesome.com/b34f0dd3c2.js"
      crossorigin="anonymous"
    ></script>

    <script>
      var currentDate = new Date();
      var validOptions = 0; // Counter for valid weekdays
      var i = 0; // Day increment counter
    
      while (validOptions < 10) {
        var optionDate = new Date(currentDate);
        optionDate.setDate(currentDate.getDate() + i + 2); // Start 2 days ahead
    
        // Skip weekends (0 = Sunday, 6 = Saturday)
        if (optionDate.getDay() === 0 || optionDate.getDay() === 6) {
          i++;
          continue;
        }
    
        var formattedDate = optionDate.toISOString().split("T")[0];
        var optionElement = document.createElement("option");
        optionElement.value = formattedDate;
        optionElement.textContent = optionDate.toLocaleDateString("en-US", {
          day: "numeric",
          month: "short",
          weekday: "long",
        }).replace(",", " -");
    
        document.getElementById("meeting-date").appendChild(optionElement);
        validOptions++; // Increment valid option count
        i++; // Move to the next day
      }
    
      document.addEventListener("DOMContentLoaded", function () {
        const params = new URLSearchParams(window.location.search);
    
        if (params.has("firstName") && params.has("lastName")) {
          const fullName = `${params.get("firstName")} ${params.get("lastName")}`;
          document.getElementById("full-name").value = fullName;
        } else if (params.has("firstName")) {
          document.getElementById("full-name").value = params.get("firstName");
        }
    
        if (params.has("Email")) {
          document.getElementById("work-email").value = params.get("Email");
        }
    
        if (params.has("District")) {
          document.getElementById("employer-district").value = params.get("District");
        }
    
        if (params.has("Job Title")) {
          document.getElementById("job-title").value = params.get("Job Title");
        }
    
        if (params.has("state")) {
          document.getElementById("state").value = params.get("state");
        } else {
          document.getElementById("state").value = "texas";
        }
    
        if (params.has("timezone")) {
          document.getElementById("preferred-time").value = params.get("timezone");
        } else {
          document.getElementById("preferred-time").value = "Central";
        }
    
        if (params.has("senderEmail")) {
          document.getElementById("sender-email").value = params.get("senderEmail");
        }
      });
    
      function formatPhoneNumber(input) {
        // Remove all non-numeric characters
        let value = input.value.replace(/\D/g, "");
    
        // Restrict to 10 digits (US phone number)
        if (value.length > 10) {
          value = value.slice(0, 10);
        }
    
        // Format as (xxx) xxx-xxxx
        let formatted = "";
        if (value.length > 0) {
          formatted = "(" + value.slice(0, 3);
        }
        if (value.length >= 4) {
          formatted += ") " + value.slice(3, 6);
        }
        if (value.length >= 7) {
          formatted += "-" + value.slice(6, 10);
        }
    
        input.value = formatted;
      }
    
      function submitForm(event) {
        event.preventDefault();
        var form = document.getElementById("appointment-form");
        if (!form.checkValidity()) {
          form.reportValidity();
          return;
        }
    
        // Validate phone number format: (xxx) xxx-xxxx
        var mobileNumber = document.getElementById("mobile-number").value;
        var phoneRegex = /^\(\d{3}\) \d{3}-\d{4}$/;
        if (!phoneRegex.test(mobileNumber)) {
          alert("Please enter a valid US phone number in the format (xxx) xxx-xxxx.");
          return;
        }
    
        var selectedDate = document.getElementById("meeting-date").value;
        var selectedTime = document.getElementById("meeting-time").value;
        var timezone = document.getElementById("preferred-time").value;
    
        // Format the meeting date (e.g., "2025-04-20 - Sunday")
        var dateObj = new Date(selectedDate);
        var formattedDate = `${selectedDate} - ${dateObj.toLocaleDateString(
          "en-US",
          { weekday: "long" }
        )}`;
    
        // Format the meeting time (e.g., "02:30 pm")
        var [hours, minutes] = selectedTime.split(":");
        var hoursNum = parseInt(hours);
        var period = hoursNum >= 12 ? "pm" : "am";
        hoursNum = hoursNum % 12 || 12; // Convert 0 to 12 for midnight, keep 12 for noon
        var formattedTime = `${hoursNum.toString().padStart(2, "0")}:${minutes} ${period}`;
    
        // Extract Campaign Name and sequenceId from URL parameters
        const params = new URLSearchParams(window.location.search);
        const campaignName = params.get("Campaign Name") || "";
        const sequenceId = params.get("sequenceId") || "";
    
        var formData = {
          full_name: document.getElementById("full-name").value.trim(),
          work_email: document.getElementById("work-email").value.trim(),
          personal_email: document.getElementById("personal-email").value.trim(),
          mobile_number: document.getElementById("mobile-number").value.trim(),
          employer_district: document.getElementById("employer-district").value.trim(),
          department_school: document.getElementById("department-school").value.trim(),
          job_title: document.getElementById("job-title").value.trim(),
          state: document.getElementById("state").value,
          meeting_date: formattedDate, // Use formatted date
          meeting_time: formattedTime, // Use formatted time
          timezone: timezone,
          notes: document.getElementById("notes").value.trim(),
          sender_email: document.getElementById("sender-email").value.trim(),
          campaign_name: campaignName, // Add Campaign Name
          sequence_id: sequenceId, // Add sequenceId
        };
    
        var xhr = new XMLHttpRequest();
        xhr.open("POST", "https://hooks.zapier.com/hooks/catch/17946141/20xgobk/", true);
        xhr.onload = function () {
          if (xhr.status === 200) {
            console.log("Form data sent successfully");
            document.getElementById("banner").style.display = "none";
            document.getElementById("success-message").style.display = "block";
          } else {
            console.error("Failed to send form data:", xhr.status, xhr.statusText);
            alert("Failed to submit form. Please try again.");
          }
        };
        xhr.onerror = function () {
          console.error("Network error");
          alert("Network error. Please check your connection and try again.");
        };
        xhr.send(JSON.stringify(formData));
      }
    
      function toggleMenu() {
        document.querySelector(".mobile-menu").classList.toggle("active");
      }
    </script>
  </body>
</html>